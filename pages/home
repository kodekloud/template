<section id="slider_wrapper" class="slider_wrapper full_page_photo">
     <div id="main_flexslider" class="flexslider">
          <ul class="slides" id="home_banner">
            <script id="banner_template" type="x-tmpl-mustache">
               <li class="item" style="background-image: url({{alt_url}})">
                    <!-- <div class="container">-->
                    <!--     <div class="carousel-caption">-->
                    <!--          <h1>a <strong>flexible</strong> theme<br>-->
                    <!--               you can <strong>trust</strong> &amp; <strong>build upon</strong>!</h1>-->
                    <!--          <p class="lead skincolored">Re<strong>start</strong> is based on <strong>good typography</strong> and <strong>large photography</strong>, serving as a foundation for your creative projects. Feel free to browse its templates and discover its features.</p>-->
                    <!--          <span class="round_badge"><strong><i class="fa fa-twitter"></i></strong><strong>V3</strong></span> </div>-->
                    <!--</div> -->
               </li>
            </script>
          </ul>
     </div>
</section>

<!--<section>-->
<!--    <div id="home_banner">    -->
<!--    <script id="banner_template" type="x-tmpl-mustache">-->
<!--        <li class="item">-->
<!--            <img src='{{photo_url_abs}}'/>-->
<!--        </li>-->
<!--    </script>-->
<!--    </div>-->
<!--</section>-->

<div class="main">
     <div class="container">
            <section class="call_to_action">
               <h3>"An Edmonton Power Centre!"</h3>
               <h4>Located in the hub of Edmontonâ€™s west side retail area are 40 shops and services serving a diversity of needs. Whether you want to shop organic, get some custom framing, pick up a prescription or dry cleaning, get your hair done, grab some flowers or simply hide behind a perfectly pressed cup of cappuccino.</h4>
            </section>
          <section class="portfolio_teasers_wrapper">
               <!--<h2 class="section_header fancy centered">Recent Work or Projects from Portfolio<small>we take pride in our work</small></h2> -->
               <div class="portfolio_strict row" id="feature_items">
                    <script id="feature_template" type="x-tmpl-mustache">
                    <div class="col-sm-4 col-md-4">
                         <div class="portfolio_item wow animated flipInX"> <a href="photo.html" data-path-hover="M 180,190 0,158 0,0 180,0 z">
                              <figure style="background-image:url({{alt_url}})">
                                   <svg viewBox="0 0 180 320" preserveAspectRatio="none">
                                        <!-- <path d="M 180,0 0,0 0,0 180,0 z"/> -->
                                   </svg>
                                   <figcaption>
                                        <p>{{description}}</p>
                                        <div class="view_button">View</div>
                                   </figcaption>
                              </figure>
                              </a>
                              <div class="portfolio_description">
                                   <h3><a href="photo.html">{{name}}</a></h3>
                              </div>
                         </div>
                    </div>
                    </script>
                
               </div>
          </section>
          <!-- <section class="clients_section wow animated fadeInUp">
               <h2 class="section_header elegant centered">Our clients<small>all of them are satisfied</small></h2>
               <div class="clients_list"> <a href="#"><img src="images/clients/wordpress.jpg" alt="client"></a> <a href="#"><img src="images/clients/jquery.jpg" alt="client"></a> <a href="#"><img src="images/clients/microlancer.jpg" alt="client"></a> <a href="#"><img src="images/clients/bbpress.jpg" alt="client"></a> <a href="#"><img src="images/clients/wpml.jpg" alt="client"></a> </div>
          </section> -->
     </div>
</div>
<script>

   

    function renderPageData (){
        var repoList = getRepoList();
        var featureList = getFeatureList();
        console.log (featureList);
        renderBanner('#banner_template','#home_banner',repoList);
        renderFeatureItems('#feature_template', '#feature_items', featureList)
    }
    loadMallData(renderPageData);
    
    function renderBanner(banner_template,home_banner,repo){
        var item_list = [];
        var item_rendered = [];
        var banner_template_html = $(banner_template).html();
        Mustache.parse(banner_template_html);   // optional, speeds up future uses
        $.each( repo , function( key, val ) {
            if( val.name == "banner"){
                $.each( val.images , function( key, val ) {
                    val.alt_url = getImageURL(val.photo_url);
                    item_list.push(val);
                });
            }
        });
        $.each( item_list , function( key, val ) {
            var repo_rendered = Mustache.render(banner_template_html,val);
            item_rendered.push(repo_rendered);
           
        });
        
       
        $(home_banner).show();
        $(home_banner).html(item_rendered.join(''));
        $('.item').first().addClass('active');
    }
    function renderFeatureItems(feature_template,feature_items,featureList){
        var item_list = [];
        var item_rendered = [];
        var feature_template_html = $(feature_template).html();
        Mustache.parse(feature_template_html);   // optional, speeds up future uses
        $.each( featureList , function( key, val ) {
            val.alt_url = getImageURL(val.image_url);
        });
        $.each( featureList , function( key, val ) {
            var featureitem_rendered = Mustache.render(feature_template_html,val);
            item_rendered.push(featureitem_rendered);
           
        });
        
       
        $(feature_items).show();
        $(feature_items).html(item_rendered.join(''));
    }
    </script>